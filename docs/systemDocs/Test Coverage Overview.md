| # | File & Suite | Test Description | Status | Why this test? |
|---|--------------|------------------|--------|----------------|
| 1 | build.processor.test.ts / processBuildJob | should successfully process a build, call analysis, execute package, and update status | [SKIPPED] | Verifies the happy path: a build is processed end-to-end, invoking analysis, execution, and status updates. Ensures the core build pipeline works as intended. |
| 2 | build.processor.test.ts / processBuildJob | should update status to FAILED if execution fails | [SKIPPED] | Ensures that if the execution phase fails, the build status is correctly set to FAILED, preventing silent errors. |
| 3 | build.processor.test.ts / processBuildJob | should log a warning and return if build is not in PENDING_ANALYSIS state | [SKIPPED] | Confirms that the processor does not proceed with builds in an invalid state, enforcing state machine correctness. |
| 4 | build.processor.test.ts / processBuildJob | should update status to FAILED if build has no target URLs | [SKIPPED] | Validates that builds missing target URLs are handled gracefully and marked as failed, improving robustness. |
| 5 | build.processor.test.ts / processBuildJob | should handle errors during processing and update status to FAILED | [SKIPPED] | Ensures any unexpected error during processing results in a failed build, preventing stuck or inconsistent builds. |
| 6 | build.processor.test.ts / processBuildJob | should handle errors during analysis and update status to FAILED | [SKIPPED] | Verifies that analysis errors are caught and cause the build to fail, maintaining clear error propagation. |
| 7 | build.processor.test.ts / processBuildJob | should handle invalid JSON in target URLs and update status to FAILED | [SKIPPED] | Ensures that malformed target URL data does not crash the processor and is marked as a failure. |
| 8 | build.processor.test.ts / processBuildJob | should handle errors during temp package update and update status to FAILED | [SKIPPED] | Confirms that errors when updating temporary package data are caught and result in a failed build. |
| 9 | build.processor.test.ts / processBuildJob | should handle errors during sample results update and update status to FAILED | [SKIPPED] | Ensures that database errors during sample result updates do not leave builds in an inconsistent state. |
| 10 | analysis.service.mcp.test.ts / AnalysisService MCP Mode | should use orchestrator MCP mode and return MCP stub package | [PASS] | Verifies that the analysis service can use the MCP orchestrator mode and return a valid MCP package, confirming protocol support. |
| 11 | analysis.service.mcp.test.ts / AnalysisService MCP Mode | should handle MCP failure and return error | [PASS] | Ensures that MCP orchestrator errors are surfaced correctly to the caller, supporting robust error handling. |
| 12 | database.integration.test.ts / Database Integration Tests | should connect to the PostgreSQL database successfully | [SKIPPED] | Confirms that the application can connect to the database, a critical infrastructure dependency. Skipped if DB is not available. |
| 13 | modules/runs/runs.controller.test.ts / POST /runs | returns 200 and a run_id for valid input | [PASS] | Tests the main happy path for creating a run, ensuring the endpoint works for valid requests. |
| 14 | modules/runs/runs.controller.test.ts / POST /runs | returns 400 for invalid input | [PASS] | Ensures that invalid input is rejected with a 400 error, validating input schema enforcement. |
| 15 | orchestrator/unifiedOrchestrator.test.ts / UnifiedOrchestratorImpl | callTool returns correct mode and structure for mode: classic | [PASS] | Verifies that the orchestrator returns the correct response structure in classic mode. |
| 16 | orchestrator/unifiedOrchestrator.test.ts / UnifiedOrchestratorImpl | callTool returns correct mode and structure for mode: mcp | [PASS] | Ensures that MCP mode returns the expected structure, confirming protocol compatibility. |
| 17 | orchestrator/unifiedOrchestrator.test.ts / UnifiedOrchestratorImpl | callTool returns correct mode and structure for mode: both | [PASS] | Validates that dual mode returns the correct structure and mode field. |
| 18 | orchestrator/unifiedOrchestrator.both.test.ts / UnifiedOrchestratorImpl (Dual Mode) | callTool (mode: both) should prefer MCP if both succeed | [PASS] | Ensures the orchestrator prefers MCP output if both classic and MCP succeed, matching the intended priority. |
| 19 | orchestrator/unifiedOrchestrator.both.test.ts / UnifiedOrchestratorImpl (Dual Mode) | callTool (mode: both) should fallback to classic if MCP fails | [PASS] | Ensures fallback to classic mode if MCP fails, guaranteeing robustness in orchestrator logic. |
| 20 | orchestrator/unifiedOrchestrator.mcp.test.ts / UnifiedOrchestratorImpl (MCP Mode) | callTool (mode: mcp) should use MCPClientStub and return stub output | [PASS] | Verifies MCP mode integration returns the expected stub output, confirming correct wiring. |
| 21 | regression/get-build-status.validation.test.ts / GET /builds/:build_id input validation | should return 405 for missing build_id (root builds path) | [PASS] | Ensures that requests to /builds/ without an ID are rejected with a 405, enforcing RESTful API design. |
| 22 | regression/get-build-status.validation.test.ts / GET /builds/:build_id input validation | should reject invalid build_id format with 400 | [PASS] | Validates that only UUIDs are accepted as build IDs, ensuring strict parameter validation. |
| 23 | regression/get-build-status.validation.test.ts / GET /builds/:build_id input validation | should reject request with missing API key with 401 | [PASS] | Ensures authentication is required for build status queries, enforcing security. |
| 24 | regression/get-build-status.validation.test.ts / GET /builds/:build_id input validation | should reject request with invalid API key with 401 | [PASS] | Ensures only valid API keys are accepted, protecting the endpoint from unauthorized access. |
| 25 | regression/get-build-status.validation.test.ts / GET /builds/:build_id input validation | should return 405 for a valid build_id that does not exist | [PASS] | Confirms that requests for non-existent builds return the correct error, improving client feedback. |
| 26 | regression/orchestrator.regression.test.ts / Orchestrator Regression Suite | classic mode: returns classic stub result | [PASS] | Ensures the orchestrator returns classic stub results in classic mode, verifying backward compatibility. |
| 27 | regression/orchestrator.regression.test.ts / Orchestrator Regression Suite | mcp mode: returns MCP stub result | [PASS] | Confirms MCP mode returns stub results, validating protocol switching. |
| 28 | regression/orchestrator.regression.test.ts / Orchestrator Regression Suite | both mode: prefers MCP if both succeed | [PASS] | Tests that dual mode prefers MCP results, matching design intent. |
| 29 | regression/orchestrator.regression.test.ts / Orchestrator Regression Suite | both mode: falls back to classic if MCP fails | [PASS] | Ensures dual mode falls back to classic if MCP fails, for resilience. |
| 30 | regression/the-brain-app.regression.test.ts / AnalysisResult type contract | should allow success=true only if package is present and error is absent | [PASS] | Validates the AnalysisResult type contract: success=true requires a package, no error. Prevents invalid states. |
| 31 | regression/the-brain-app.regression.test.ts / AnalysisResult type contract | should allow success=false only if error is present and package is absent | [PASS] | Ensures that failed analysis results always include an error and no package, enforcing type safety. |
| 32 | regression/the-brain-app.regression.test.ts / The Brain App - Regression Suite | processes a build end-to-end (happy path) | [PASS] | Verifies the full build processing pipeline, ensuring all major components work together as expected. |
| 33 | regression/the-brain-app.regression.test.ts / The Brain App - Regression Suite | fails gracefully if no target URLs | [PASS] | Ensures the system fails gracefully and provides clear feedback when required input is missing. |
| 34 | regression/the-brain-app.regression.test.ts / The Brain App - Regression Suite | handles analysis (LLM) failure | [PASS] | Verifies that LLM analysis errors are handled cleanly without crashing the system. |
| 35 | regression/the-brain-app.regression.test.ts / The Brain App - Regression Suite | handles execution failure | [PASS] | Ensures that execution errors are caught and reported, maintaining stability. |
| 36 | regression/the-brain-app.regression.test.ts / The Brain App - Regression Suite | handles invalid JSON in targetUrls | [PASS] | Validates the system's robustness against malformed input data. |
| 37 | container.integration.test.ts / Container Integration Tests | should build and run a container image using Podman | [SKIPPED] | Checks that the application's container image can be built and run, supporting deployment and CI/CD. Skipped if Podman is not available. |
